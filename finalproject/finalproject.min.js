var window_height,window_width,nav_toggle,navbar_initialized=!1,$toggle=$(".navbar-toggler"),materialType="a",targetItem="",materialData={orderIndex:[6,3,5,4,1,2,0],purplePowder:435,purpleStone:1140,purpleEquip:761,purpleMaxedEquip:20080,orangePowder:1500,orangeEquip:3e3,orangeMaxedEquip:131794},equipData={purpleWeapon:59800,orangeWeapon:395200,greenWeapon:1216800,redWeapon:2940600,redWeapon40:4915755,purpleArmor:45994,orangeArmor:304e3,greenArmor:936e3,redArmor:2262e3,redArmor40:3781350};function isMobile(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var lg="linear-gradient";function lock(e){el=document.getElementById(e),el.classList.add("locked"),el.style.backgroundImage="linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),"+el.style.backgroundImage}function unlock(e){el=document.getElementById(e),el.classList.remove("locked"),el.style.backgroundImage=el.style.backgroundImage.substr(el.style.backgroundImage.indexOf(lg,14))}function equipToggleTarget(e){el=document.getElementById(e),el.classList.contains("locked")||($resultEquip=$("#resultEquip"),$resultEquip.empty(),el.classList.contains("targeted")?(el.classList.remove("targeted"),targetItem="",document.querySelectorAll("#equip > button").forEach(function(t){t.id===e?t.style.backgroundImage=t.style.backgroundImage.substr(t.style.backgroundImage.indexOf(lg,14)):unlock(t.id)})):(el.classList.add("targeted"),targetItem=e,e.includes("Armor")&&"w"===materialType?document.querySelectorAll("#material > button").forEach(function(e){e.style.backgroundImage=e.style.backgroundImage.replace("weapon","armor"),materialType="a"}):e.includes("Weapon")&&"a"===materialType&&document.querySelectorAll("#material > button").forEach(function(e){e.style.backgroundImage=e.style.backgroundImage.replace("armor","weapon"),materialType="w"}),$resultEquip.append($("<button>").attr("style","background-image:"+el.style.backgroundImage).attr("onClick",'equipToggleTarget("'+el.id+'")').append($(el.children).clone())),console.log($resultEquip),document.querySelectorAll("#equip > button").forEach(function(t){t.id===e?t.style.backgroundImage="linear-gradient(rgba(191,92,60,0.8), rgba(191,92,60,0.8)), "+t.style.backgroundImage:lock(t.id)})),calc())}function materialToggleSelect(e){el=document.getElementById(e),el.classList.contains("selected")?(el.classList.remove("selected"),el.style.backgroundImage=el.style.backgroundImage.substr(el.style.backgroundImage.indexOf(lg,14))):(el.classList.add("selected"),el.style.backgroundImage="linear-gradient(rgba(121,136,154,0.6), rgba(121,136,154,0.6)),"+el.style.backgroundImage),calc()}function calc(){var e=document.querySelectorAll("#material > button"),t=""===targetItem?0:equipData[targetItem];$resultMaterial=$("#resultMaterial"),$resultMaterial.empty(),materialData.orderIndex.forEach(function(a){e[a].classList.contains("selected")&&($button=$("<button>").attr("style","background-image:"+e[a].style.backgroundImage.substr(e[a].style.backgroundImage.indexOf(lg,14))),$button.append($("<span>").text(t/materialData[e[a].id]>>0)),$button.append($(e[a].children).clone()),$button.attr("onClick",'materialToggleSelect("'+e[a].id+'")'),$resultMaterial.append($button),t%=materialData[e[a].id])})}var offCanvas={sidenav:{sidenav_visible:0},initSideNav:function(){navbar_initialized||($toggle.on("click",function(){1==offCanvas.sidenav.sidenav_visible?closeCanvas():showCanvas()}),navbar_initialized=!0)},swipeOutListener:function(){var e=document.getElementById("swipe"),t={isScrolling:void 0,isSwipeRight:!0,start:null,curr:null,handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchcancel":case"touchend":this.onTouchEnd(e)}},onTouchStart:function(e){this.start={x:e.touches[0].pageX,y:e.touches[0].pageY},this.curr={x:e.touches[0].pageX,y:e.touches[0].pageY},e.stopPropagation()},onTouchMove:function(e){this.start&&(dx=e.touches[0].pageX-this.curr.x,this.curr.x=e.touches[0].pageX,void 0===this.isScrolling&&(this.isScrolling=2*Math.abs(dx)<Math.abs(e.touches[0].pageY-this.start.y)),this.isScrolling||e.preventDefault())},onTouchEnd:function(e){if(!this.isScrolling){if(!this.start)return;this.start.x-this.curr.x>window_width/12&&0==offCanvas.sidenav.sidenav_visible?showCanvas():this.start.x-this.curr.x<12&&1==offCanvas.sidenav.sidenav_visible&&closeCanvas()}this.start=null,this.curr=null,this.isScrolling=void 0,e.stopPropagation()}};e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("touchmove",t,{passive:!1}),e.addEventListener("touchend",t,{passive:!1}),e.addEventListener("touchcancel",t,{passive:!1})}};function showCanvas(){$("html").addClass("nav-open"),setTimeout(function(){$toggle.addClass("toggled")},300),$('<div id="overlay"></div>').appendTo("body").on("click",function(){closeCanvas()}),offCanvas.sidenav.sidenav_visible=1}function closeCanvas(){$("html").removeClass("nav-open"),setTimeout(function(){$toggle.removeClass("toggled")},300),$("#overlay").remove(),offCanvas.sidenav.sidenav_visible=0}$(document).ready(function(){if(window_width=$(window).width(),nav_toggle=!!$("nav").hasClass("navbar-offcanvas"),window_width>992){var e=$("#NavItems");$("a.navbar-brand").after(e[0]),$("body > .navbar-collapse::after").hide()}else isMobile()?($("button.navbar-icon")[0].removeAttribute("style"),offCanvas.initSideNav(),offCanvas.swipeOutListener(),$(".nav-link:not(.dropdown-toggle), .dropdown-item").on("click",function(){var e=$(".navbar-toggler");$("html").removeClass("nav-open"),offCanvas.sidenav.sidenav_visible=0,setTimeout(function(){e.removeClass("toggled")},300)})):($("button.navbar-icon")[0].removeAttribute("style"),offCanvas.initSideNav())});